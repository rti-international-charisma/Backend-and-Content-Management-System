(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6f2d"],{7570:function(e,n,t){"use strict";t.r(n),n["default"]="# Custom API Endpoints <small></small>\n\n> Custom API Endpoints register new API routes which can be used to infinitely extend the core functionality of the\n> platform.\n\n## 1. Setup the Boilerplate\n\nCustom endpoints are dynamically loaded from within your project's `/extensions/endpoints` folder. Keep in mind that the\nextensions directory is configurable within your env file, and may be located elsewhere.\n\nEach endpoint is registered using a registration function within a scoped directory. For example, to create a custom\n`/custom/my-endpoint/` endpoint, you would add the following function to `/extensions/endpoints/my-endpoint/index.js`.\n\n```js\nmodule.exports = function registerEndpoint(router) {\n\trouter.get('/', (req, res) => res.send('Hello, World!'));\n};\n```\n\nYou can also create several scoped endpoints within a single function:\n\n```js\n// /custom/my-endpoint/\n// /custom/my-endpoint/intro\n// /custom/my-endpoint/goodbye\nmodule.exports = function registerEndpoint(router) {\n\trouter.get('/', (req, res) => res.send('Hello, World!'));\n\trouter.get('/intro', (req, res) => res.send('Nice to meet you.'));\n\trouter.get('/goodbye', (req, res) => res.send('Goodbye!'));\n};\n```\n\n## 2. Develop your Custom Endpoint\n\nThe `registerEndpoint` function receives two parameters: `router` and `context`. Router is an express Router instance\nthat is scoped to `/custom/<extension-name>`, while `context` holds the following properties:\n\n- `services` — All API internal services.\n- `exceptions` — API exception objects that can be used to throw \"proper\" errors.\n- `database` — Knex instance that is connected to the current database.\n- `env` — Parsed environment variables.\n\n## 3. Restart the API\n\nTo deploy your endpoint, simply restart the API by running:\n\n```bash\nnpx directus start\n```\n\n## Full Example:\n\n```js\n// extensions/endpoints/recipes/index.js\n\nmodule.exports = function registerEndpoint(router, { services, exceptions }) {\n\tconst { ItemsService } = services;\n\tconst { ServiceUnavailableException } = exceptions;\n\n\trouter.get('/', (req, res, next) => {\n\t\tconst recipeService = new ItemsService('recipes', { schema: req.schema, accountability: req.accountability });\n\n\t\trecipeService\n\t\t\t.readByQuery({ sort: 'name', fields: ['*'] })\n\t\t\t.then((results) => res.json(results))\n\t\t\t.catch((error) => {\n\t\t\t\treturn next(new ServiceUnavailableException(error.message));\n\t\t\t});\n\t});\n};\n```\n"}}]);